void 0===Craft.SocialFeeds&&(Craft.SocialFeeds={}),function($){function e(e,t){const r=undefined,a=$(e).find(".lightswitch").data("lightswitch"),o=undefined;$('.sf-switch-group[data-toggle-group="'+t+'"]').each((function(t,r){$(r).removeClass("disabled"),r!==e&&a.on&&($(r).addClass("disabled"),$(r).find(".lightswitch").data("lightswitch").turnOff())}))}$(document).on("click","[data-refresh-settings]",(function(e){e.preventDefault();const t=$(this),r=t.parent().parent(),a=r.find("select"),o=undefined,s=undefined,n={source:t.data("source"),setting:t.data("refresh-settings")},d=function(e){let t=r.find(".sf-error");e||t.remove(),t.length||(t=$('<div class="sf-error error"></div>').appendTo(r)),t.html(e)},i=function(e){let t=a.val(),r="";$.each(e,((e,t)=>{r+='<option value="'+t.value+'">'+t.label+"</option>"})),a.html(r),t&&a.val(t)};t.addClass("sf-loading sf-loading-sm"),d(null),Craft.sendActionRequest("POST","social-feeds/sources/refresh-settings",{data:n}).then((e=>{if(e.data.error){let t=Craft.t("social-feeds","An error occurred.");return e.data.error&&(t+=`<br><code>${e.data.error}</code>`),void d(t)}i(e.data)})).catch((e=>{let t=e;e.response&&e.response.data&&e.response.data.error&&(t+=`<br><code>${e.response.data.error}</code>`),d(t)})).finally((()=>{t.removeClass("sf-loading sf-loading-sm")}))})),$(document).on("click",".sf-switch-group",(function(t){t.preventDefault();const r=$(this).find(".lightswitch"),a=$(this).data("toggle-group");if(r.length){const o=r.data("lightswitch");o&&(o.toggle(),a&&e(t.currentTarget,a))}})),Garnish.$doc.ready((()=>{$(".sf-switch-group[data-toggle-group] .lightswitch.on").each((function(t,r){const a=$(this).parents(".sf-switch-group"),o=a.data("toggle-group");e(a[0],o)}))})),$(document).on("click",".sf-refresh-btn",(function(e){e.preventDefault();const t=$(this),r=$(".sf-feed-preview");t.addClass("sf-loading sf-loading-sm");const a=function(e){let t=r.find(".sf-error");e||t.remove(),t.length||(t=$('<div class="sf-error error"></div>').prependTo(r)),t.html(e)};var o=Garnish.getPostData($("#main-form")),s;const n={sources:Craft.expandPostArray(o).sources};a(null),Craft.sendActionRequest("POST","social-feeds/feeds/preview",{data:n}).then((e=>{if(e.data.error){let t=Craft.t("social-feeds","An error occurred.");return e.data.error&&(t+=`<br><code>${e.data.error}</code>`),void a(t)}r.html(e.data)})).catch((e=>{let t=e;e.response&&e.response.data&&e.response.data.error&&(t+=`<br><code>${e.response.data.error}</code>`),a(t)})).finally((()=>{t.removeClass("sf-loading sf-loading-sm")}))}))}(jQuery);
//# sourceMappingURL=social-feeds-cp.js.map